<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My First PWA</title>
    <link rel="canonical" href="https://kwen1510.github.io/pwa/" />
    <link rel="manifest" href="/pwa/manifest.webmanifest" />
    <script src="https://unpkg.com/html5-qrcode@2.0.9/dist/html5-qrcode.min.js"></script>
  </head>

  <body>
    <h2>This is my PWA</h2>
    <input type="text" id="textBox" />
    <button onclick="clearInput()">Clear Inputs</button>

    <div id="qr-reader" style="width: 600px"></div>

    <script>
      function clearInput() {
        document.getElementById("textBox").value = "";
      }

      function onScanSuccess(decodedText, decodedResult) {
        // handle the scanned code as you like, for example:
        console.log(`Code matched = ${decodedText}`, decodedResult);
        document.getElementById("textBox").value = decodedText;
      }

      function onScanFailure(error) {
        // handle scan failure, usually better to ignore and keep scanning.
        // for example:
        console.warn(`Code scan error = ${error}`);
      }

      var html5QrcodeScanner = new Html5QrcodeScanner("qr-reader", {
        fps: 10,
        qrbox: 250,
      });
      html5QrcodeScanner.render(onScanSuccess);

      if (navigator.serviceWorker) {
        navigator.serviceWorker.register("/pwa/sw.js", { scope: "/pwa/" });
      }
    </script>
  </body>
</html>
